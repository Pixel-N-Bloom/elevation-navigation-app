<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <meta name="theme-color" content="#2563eb" />
    <meta name="description" content="Navigate with elevation awareness for COPD and respiratory health" />
    
    <!-- PWA Meta Tags for iPhone -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Elevation Navigation" />
    
    <title>Elevation Navigation</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            -webkit-user-select: none;
            -webkit-touch-callout: none;
            -webkit-tap-highlight-color: transparent;
        }
        
        @media (display-mode: standalone) {
            body {
                padding-top: env(safe-area-inset-top);
                padding-bottom: env(safe-area-inset-bottom);
            }
        }
        
        button {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
        
        input {
            -webkit-appearance: none;
            border-radius: 0;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        
        // Icon Components
        const MapPin = () => (
            React.createElement('svg', {
                className: 'w-5 h-5',
                fill: 'none',
                stroke: 'currentColor',
                viewBox: '0 0 24 24'
            }, [
                React.createElement('path', {
                    key: '1',
                    strokeLinecap: 'round',
                    strokeLinejoin: 'round',
                    strokeWidth: 2,
                    d: 'M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z'
                }),
                React.createElement('path', {
                    key: '2',
                    strokeLinecap: 'round',
                    strokeLinejoin: 'round',
                    strokeWidth: 2,
                    d: 'M15 11a3 3 0 11-6 0 3 3 0 016 0z'
                })
            ])
        );
        
        const Navigation = () => (
            React.createElement('svg', {
                className: 'w-5 h-5',
                fill: 'none',
                stroke: 'currentColor',
                viewBox: '0 0 24 24'
            }, React.createElement('path', {
                strokeLinecap: 'round',
                strokeLinejoin: 'round',
                strokeWidth: 2,
                d: 'M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7'
            }))
        );
        
        const AlertTriangle = () => (
            React.createElement('svg', {
                className: 'w-8 h-8',
                fill: 'none',
                stroke: 'currentColor',
                viewBox: '0 0 24 24'
            }, React.createElement('path', {
                strokeLinecap: 'round',
                strokeLinejoin: 'round',
                strokeWidth: 2,
                d: 'M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.732 16.5c-.77.833.192 2.5 1.732 2.5z'
            }))
        );
        
        const Download = () => (
            React.createElement('svg', {
                className: 'w-5 h-5',
                fill: 'none',
                stroke: 'currentColor',
                viewBox: '0 0 24 24'
            }, React.createElement('path', {
                strokeLinecap: 'round',
                strokeLinejoin: 'round',
                strokeWidth: 2,
                d: 'M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4'
            }))
        );
        
        const Wifi = () => (
            React.createElement('svg', {
                className: 'w-5 h-5',
                fill: 'none',
                stroke: 'currentColor',
                viewBox: '0 0 24 24'
            }, React.createElement('path', {
                strokeLinecap: 'round',
                strokeLinejoin: 'round',
                strokeWidth: 2,
                d: 'M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0'
            }))
        );
        
        const WifiOff = () => (
            React.createElement('svg', {
                className: 'w-5 h-5',
                fill: 'none',
                stroke: 'currentColor',
                viewBox: '0 0 24 24'
            }, React.createElement('path', {
                strokeLinecap: 'round',
                strokeLinejoin: 'round',
                strokeWidth: 2,
                d: 'M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364L18.364 5.636'
            }))
        );
        
        const Heart = () => (
            React.createElement('svg', {
                className: 'w-6 h-6',
                fill: 'none',
                stroke: 'currentColor',
                viewBox: '0 0 24 24'
            }, React.createElement('path', {
                strokeLinecap: 'round',
                strokeLinejoin: 'round',
                strokeWidth: 2,
                d: 'M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z'
            }))
        );
        
        const Settings = () => (
            React.createElement('svg', {
                className: 'w-5 h-5',
                fill: 'none',
                stroke: 'currentColor',
                viewBox: '0 0 24 24'
            }, [
                React.createElement('path', {
                    key: '1',
                    strokeLinecap: 'round',
                    strokeLinejoin: 'round',
                    strokeWidth: 2,
                    d: 'M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z'
                }),
                React.createElement('path', {
                    key: '2',
                    strokeLinecap: 'round',
                    strokeLinejoin: 'round',
                    strokeWidth: 2,
                    d: 'M15 12a3 3 0 11-6 0 3 3 0 016 0z'
                })
            ])
        );
        
        const Map = () => (
            React.createElement('svg', {
                className: 'w-5 h-5',
                fill: 'none',
                stroke: 'currentColor',
                viewBox: '0 0 24 24'
            }, React.createElement('path', {
                strokeLinecap: 'round',
                strokeLinejoin: 'round',
                strokeWidth: 2,
                d: 'M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7'
            }))
        );
        
        const Home = () => (
            React.createElement('svg', {
                className: 'w-4 h-4',
                fill: 'none',
                stroke: 'currentColor',
                viewBox: '0 0 24 24'
            }, React.createElement('path', {
                strokeLinecap: 'round',
                strokeLinejoin: 'round',
                strokeWidth: 2,
                d: 'M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6'
            }))
        );
        
        const ElevationNavigationApp = () => {
            const [currentLocation, setCurrentLocation] = useState({ lat: 34.0522, lng: -118.2437, elevation: 285 });
            const [destination, setDestination] = useState('');
            const [isOnline, setIsOnline] = useState(navigator.onLine);
            const [elevationThreshold, setElevationThreshold] = useState(8000);
            const [userProfile, setUserProfile] = useState({
                name: '',
                copdSeverity: 'moderate',
                emergencyContact: '',
                maxElevation: 8000
            });
            const [routeOptions, setRouteOptions] = useState([]);
            const [isNavigating, setIsNavigating] = useState(false);
            const [offlineDataDownloaded, setOfflineDataDownloaded] = useState(false);
            const [showMap, setShowMap] = useState(false);
            const [apiStatus, setApiStatus] = useState('disconnected');
            const [isPWA, setIsPWA] = useState(false);
            const mapRef = useRef(null);
            
            // PWA Detection and Setup
            useEffect(() => {
                const isRunningPWA = window.matchMedia('(display-mode: standalone)').matches || 
                                    window.navigator.standalone === true;
                setIsPWA(isRunningPWA);
                
                const handleOnline = () => setIsOnline(true);
                const handleOffline = () => setIsOnline(false);
                
                window.addEventListener('online', handleOnline);
                window.addEventListener('offline', handleOffline);
                
                const savedProfile = localStorage.getItem('copd_profile');
                if (savedProfile) {
                    setUserProfile(JSON.parse(savedProfile));
                }
                
                const savedOfflineData = localStorage.getItem('offline_data_downloaded');
                if (savedOfflineData) {
                    setOfflineDataDownloaded(true);
                }
                
                return () => {
                    window.removeEventListener('online', handleOnline);
                    window.removeEventListener('offline', handleOffline);
                };
            }, []);
            
            // Get real GPS location on iPhone
            useEffect(() => {
                if ('geolocation' in navigator) {
                    setApiStatus('connecting');
                    
                    navigator.geolocation.getCurrentPosition(
                        (position) => {
                            setCurrentLocation({
                                lat: position.coords.latitude,
                                lng: position.coords.longitude,
                                elevation: position.coords.altitude ? position.coords.altitude * 3.28084 : 285
                            });
                            setApiStatus('connected');
                        },
                        (error) => {
                            console.error('GPS error:', error);
                            setApiStatus('error');
                            if (error.code === error.PERMISSION_DENIED) {
                                alert('Please enable location access in Settings > Safari > Location Services for GPS functionality.');
                            }
                        },
                        {
                            enableHighAccuracy: true,
                            timeout: 10000,
                            maximumAge: 60000
                        }
                    );
                    
                    const watchId = navigator.geolocation.watchPosition(
                        (position) => {
                            if (isNavigating) {
                                setCurrentLocation(prev => ({
                                    lat: position.coords.latitude,
                                    lng: position.coords.longitude,
                                    elevation: position.coords.altitude ? position.coords.altitude * 3.28084 : prev.elevation
                                }));
                            }
                        },
                        null,
                        { enableHighAccuracy: true, maximumAge: 30000 }
                    );
                    
                    return () => navigator.geolocation.clearWatch(watchId);
                }
            }, [isNavigating]);
            
            const calculateRoutes = () => {
                if (!destination) return;
                
                setApiStatus('calculating');
                
                setTimeout(() => {
                    const mockRoutes = [
                        {
                            id: 1,
                            name: 'Lowest Elevation Route',
                            distance: '145 miles',
                            duration: '2h 45m',
                            maxElevation: 3200,
                            elevationGain: 1800,
                            recommended: true,
                            profile: [285, 450, 680, 1200, 2100, 3200, 2800, 1900, 1200, 800, 450],
                            apiData: {
                                directionsResult: 'mock_directions_result',
                                elevationSamples: 50,
                                waypointsCount: 12
                            }
                        },
                        {
                            id: 2,
                            name: 'Fastest Route (Highway)',
                            distance: '128 miles',
                            duration: '2h 15m',
                            maxElevation: 6500,
                            elevationGain: 4200,
                            recommended: false,
                            profile: [285, 800, 2100, 4500, 6500, 5200, 3800, 2100, 900, 450],
                            apiData: {
                                directionsResult: 'mock_directions_result_2',
                                elevationSamples: 50,
                                waypointsCount: 8
                            }
                        },
                        {
                            id: 3,
                            name: 'Scenic Route',
                            distance: '138 miles',
                            duration: '2h 32m',
                            maxElevation: 4800,
                            elevationGain: 2900,
                            recommended: false,
                            profile: [285, 600, 1200, 2800, 4800, 3900, 2400, 1500, 800, 400],
                            apiData: {
                                directionsResult: 'mock_directions_result_3',
                                elevationSamples: 50,
                                waypointsCount: 15
                            }
                        }
                    ];
                    
                    setRouteOptions(mockRoutes);
                    setApiStatus('connected');
                }, 2000);
            };
            
            const startNavigation = (route) => {
                setIsNavigating(true);
                console.log('Starting navigation with route:', route);
            };
            
            const downloadOfflineData = () => {
                setApiStatus('downloading');
                const downloadSteps = [
                    'Downloading maps for route area...',
                    'Caching elevation data...',
                    'Storing emergency locations...',
                    'Preparing offline navigation...'
                ];
                
                let currentStep = 0;
                const interval = setInterval(() => {
                    console.log(downloadSteps[currentStep]);
                    currentStep++;
                    if (currentStep >= downloadSteps.length) {
                        clearInterval(interval);
                        setOfflineDataDownloaded(true);
                        localStorage.setItem('offline_data_downloaded', 'true');
                        localStorage.setItem('offline_routes', JSON.stringify(routeOptions));
                        setApiStatus('connected');
                        alert('Offline maps and elevation data downloaded successfully!\n\nIncludes:\n• Route maps and alternatives\n• Detailed elevation profiles\n• Emergency locations\n• Hospital and pharmacy locations');
                    }
                }, 1000);
            };
            
            const saveProfile = (profile) => {
                setUserProfile(profile);
                localStorage.setItem('copd_profile', JSON.stringify(profile));
            };
            
            const getElevationStatus = (elevation) => {
                if (elevation > elevationThreshold) return { status: 'danger', color: 'text-red-600', bg: 'bg-red-100' };
                if (elevation > elevationThreshold * 0.8) return { status: 'warning', color: 'text-yellow-600', bg: 'bg-yellow-100' };
                return { status: 'safe', color: 'text-green-600', bg: 'bg-green-100' };
            };
            
            const elevationStatus = getElevationStatus(currentLocation.elevation);
            
            return React.createElement('div', { className: 'max-w-md mx-auto bg-white min-h-screen' }, [
                // PWA Status Banner
                !isPWA && React.createElement('div', {
                    key: 'pwa-banner',
                    className: 'bg-green-600 text-white p-2 text-center text-sm'
                }, React.createElement('div', {
                    className: 'flex items-center justify-center space-x-2'
                }, [
                    React.createElement(Home, { key: 'home-icon' }),
                    React.createElement('span', { key: 'banner-text' }, 'Tap Safari\'s share button, then "Add to Home Screen" for app experience')
                ])),
                
                // Header
                React.createElement('div', {
                    key: 'header',
                    className: 'bg-blue-600 text-white p-4'
                }, [
                    React.createElement('div', {
                        key: 'header-content',
                        className: 'flex items-center justify-between'
                    }, [
                        React.createElement('div', {
                            key: 'header-left',
                            className: 'flex items-center space-x-2'
                        }, [
                            React.createElement(Heart, { key: 'heart-icon' }),
                            React.createElement('h1', {
                                key: 'title',
                                className: 'text-lg font-bold'
                            }, 'Elevation Navigation')
                        ]),
                        React.createElement('div', {
                            key: 'header-right',
                            className: 'flex items-center space-x-2'
                        }, [
                            isOnline ? React.createElement(Wifi, { key: 'wifi-icon' }) : React.createElement(WifiOff, { key: 'wifi-off-icon' }),
                            React.createElement('div', {
                                key: 'status-dot',
                                className: `w-2 h-2 rounded-full ${
                                    apiStatus === 'connected' ? 'bg-green-400' : 
                                    apiStatus === 'connecting' || apiStatus === 'calculating' || apiStatus === 'downloading' ? 'bg-yellow-400' : 
                                    'bg-red-400'
                                }`
                            }),
                            React.createElement(Settings, { key: 'settings-icon' })
                        ])
                    ]),
                    React.createElement('div', {
                        key: 'header-status',
                        className: 'mt-1 text-xs opacity-75'
                    }, `${isPWA ? 'PWA Mode' : 'Web Mode'} • GPS: ${apiStatus === 'connected' ? 'Active' : 'Inactive'} • ${isOnline ? 'Online' : 'Offline'}`)
                ]),
                
                // Current Status
                React.createElement('div', {
                    key: 'current-status',
                    className: `p-4 m-4 rounded-lg ${elevationStatus.bg}`
                }, [
                    React.createElement('div', {
                        key: 'status-content',
                        className: 'flex items-center justify-between'
                    }, [
                        React.createElement('div', { key: 'status-left' }, [
                            React.createElement('div', {
                                key: 'status-label',
                                className: 'flex items-center space-x-2'
                            }, [
                                React.createElement(MapPin, { key: 'mappin-icon' }),
                                React.createElement('span', {
                                    key: 'label-text',
                                    className: 'font-semibold'
                                }, 'Current Elevation')
                            ]),
                            React.createElement('div', {
                                key: 'elevation-value',
                                className: `text-2xl font-bold ${elevationStatus.color}`
                            }, `${Math.round(currentLocation.elevation)} ft`)
                        ]),
                        elevationStatus.status === 'danger' && React.createElement(AlertTriangle, { key: 'alert-icon' })
                    ]),
                    React.createElement('div', {
                        key: 'status-footer',
                        className: 'mt-2 text-sm text-gray-600'
                    }, `Max safe elevation: ${elevationThreshold} ft | GPS: Active`)
                ]),
                
                // Map View Toggle
                React.createElement('div', {
                    key: 'map-toggle',
                    className: 'p-4'
                }, React.createElement('button', {
                    onClick: () => setShowMap(!showMap),
                    className: 'w-full p-3 bg-gray-100 rounded-lg hover:bg-gray-200 flex items-center justify-center space-x-2'
                }, [
                    React.createElement(Map, { key: 'map-icon' }),
                    React.createElement('span', { key: 'map-text' }, showMap ? 'Hide Map' : 'Show Map')
                ])),
                
                // Google Maps Container
                showMap && React.createElement('div', {
                    key: 'map-container',
                    className: 'mx-4 mb-4'
                }, React.createElement('div', {
                    ref: mapRef,
                    className: 'w-full h-64 bg-gray-200 rounded-lg flex items-center justify-center border-2 border-gray-300'
                }, React.createElement('div', {
                    className: 'text-center text-gray-600'
                }, [
                    React.createElement('div', {
                        key: 'map-placeholder-icon',
                        className: 'w-12 h-12 mx-auto mb-2 opacity-50'
                    }, React.createElement(Map)),
                    React.createElement('div', {
                        key: 'map-title',
                        className: 'font-semibold'
                    }, 'Google Maps View'),
                    React.createElement('div', {
                        key: 'map-status',
                        className: 'text-sm'
                    }, apiStatus === 'connected' ? 'Ready for integration' : 'API connecting...'),
                    React.createElement('div', {
                        key: 'map-description',
                        className: 'text-xs mt-2 px-4'
                    }, 'Will show: Current location, route options, elevation overlay, emergency locations')
                ]))),
                
                // Offline Data Section
                React.createElement('div', {
                    key: 'offline-section',
                    className: 'p-4 m-4 bg-gray-50 rounded-lg'
                }, React.createElement('div', {
                    className: 'flex items-center justify-between'
                }, [
                    React.createElement('div', { key: 'offline-info' }, [
                        React.createElement('h3', {
                            key: 'offline-title',
                            className: 'font-semibold'
                        }, 'Offline Maps'),
                        React.createElement('p', {
                            key: 'offline-status',
                            className: 'text-sm text-gray-600'
                        }, offlineDataDownloaded ? 'Downloaded' : 'Not downloaded')
                    ]),
                    React.createElement('button', {
                        key: 'download-btn',
                        onClick: downloadOfflineData,
                        disabled: offlineDataDownloaded,
                        className: `p-2 rounded-lg ${
                            offlineDataDownloaded 
                                ? 'bg-green-100 text-green-600' 
                                : 'bg-blue-100 text-blue-600 hover:bg-blue-200'
                        }`
                    }, React.createElement(Download))
                ])),
                
                // Destination Input
                React.createElement('div', {
                    key: 'destination-section',
                    className: 'p-4'
                }, [
                    React.createElement('label', {
                        key: 'destination-label',
                        className: 'block text-sm font-medium text-gray-700 mb-2'
                    }, 'Destination'),
                    React.createElement('div', {
                        key: 'destination-input-group',
                        className: 'flex space-x-2'
                    }, [
                        React.createElement('input', {
                            key: 'destination-input',
                            type: 'text',
                            value: destination,
                            onChange: (e) => setDestination(e.target.value),
                            placeholder: 'Enter destination address',
                            className: 'flex-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500'
                        }),
                        React.createElement('button', {
                            key: 'calculate-btn',
                            onClick: calculateRoutes,
                            className: 'px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700'
                        }, React.createElement(Navigation))
                    ])
                ]),
                
                // Route Options
                routeOptions.length > 0 && React.createElement('div', {
                    key: 'routes-section',
                    className: 'p-4'
                }, [
                    React.createElement('h3', {
                        key: 'routes-title',
                        className: 'text-lg font-semibold mb-3'
                    }, 'Route Options'),
                    ...routeOptions.map((route) => 
                        React.createElement('div', {
                            key: route.id,
                            className: `mb-3 p-4 rounded-lg border-2 ${
                                route.recommended ? 'border-green-500 bg-green-50' : 'border-gray-200'
                            }`
                        }, [
                            React.createElement('div', {
                                key: 'route-header',
                                className: 'flex justify-between items-start mb-2'
                            }, [
                                React.createElement('div', { key: 'route-info' }, [
                                    React.createElement('h4', {
                                        key: 'route-name',
                                        className: 'font-semibold'
                                    }, route.name),
                                    route.recommended && React.createElement('span', {
                                        key: 'recommended-badge',
                                        className: 'text-xs bg-green-600 text-white px-2 py-1 rounded'
                                    }, 'RECOMMENDED')
                                ]),
                                React.createElement('button', {
                                    key: 'start-btn',
                                    onClick: () => startNavigation(route),
                                    className: 'px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm'
                                }, 'Start')
                            ]),
                            
                            React.createElement('div', {
                                key: 'route-details',
                                className: 'grid grid-cols-2 gap-2 text-sm text-gray-600 mb-2'
                            }, [
                                React.createElement('div', { key: 'distance' }, `Distance: ${route.distance}`),
                                React.createElement('div', { key: 'duration' }, `Time: ${route.duration}`),
                                React.createElement('div', {
                                    key: 'max-elevation',
                                    className: route.maxElevation > elevationThreshold ? 'text-red-600 font-semibold' : ''
                                }, `Max Elevation: ${route.maxElevation} ft`),
                                React.createElement('div', { key: 'elevation-gain' }, `Elevation Gain: ${route.elevationGain} ft`)
                            ]),
                            
                            React.createElement('div', {
                                key: 'api-info',
                                className: 'text-xs text-gray-500 mb-2'
                            }, `Google Maps: ${route.apiData.waypointsCount} waypoints, ${route.apiData.elevationSamples} elevation samples`),
                            
                            React.createElement('div', {
                                key: 'elevation-profile',
                                className: 'mt-2'
                            }, [
                                React.createElement('div', {
                                    key: 'profile-label',
                                    className: 'text-xs text-gray-500 mb-1'
                                }, 'Elevation Profile'),
                                React.createElement('div', {
                                    key: 'profile-chart',
                                    className: 'flex items-end space-x-1 h-8'
                                }, route.profile.map((elevation, index) =>
                                    React.createElement('div', {
                                        key: index,
                                        className: `flex-1 rounded-t ${
                                            elevation > elevationThreshold ? 'bg-red-400' : 'bg-blue-400'
                                        }`,
                                        style: { height: `${(elevation / Math.max(...route.profile)) * 100}%` }
                                    })
                                ))
                            ])
                        ])
                    )
                ]),
                
                // Navigation Status
                isNavigating && React.createElement('div', {
                    key: 'navigation-status',
                    className: 'fixed bottom-0 left-0 right-0 bg-blue-600 text-white p-4'
                }, React.createElement('div', {
                    className: 'max-w-md mx-auto'
                }, React.createElement('div', {
                    className: 'flex items-center justify-between'
                }, [
                    React.createElement('div', { key: 'nav-info' }, [
                        React.createElement('div', {
                            key: 'nav-title',
                            className: 'font-semibold'
                        }, 'Navigating...'),
                        React.createElement('div', {
                            key: 'nav-subtitle',
                            className: 'text-sm'
                        }, 'Following lowest elevation route')
                    ]),
                    React.createElement('button', {
                        key: 'stop-btn',
                        onClick: () => setIsNavigating(false),
                        className: 'px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700'
                    }, 'Stop')
                ]))),
                
                // Emergency Button
                React.createElement('div', {
                    key: 'emergency-btn',
                    className: 'fixed bottom-20 right-4'
                }, React.createElement('button', {
                    className: 'w-16 h-16 bg-red-600 text-white rounded-full shadow-lg hover:bg-red-700 flex items-center justify-center',
                    onClick: () => alert('Emergency feature - would contact emergency services and share current location and elevation')
                }, React.createElement(AlertTriangle)))
            ]);
        };
        
        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(ElevationNavigationApp));
        
        // Register service worker for PWA functionality
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                const swCode = `
                    const CACHE_NAME = 'elevation-navigation-v1';
                    const urlsToCache = ['/'];
                    
                    self.addEventListener('install', (event) => {
                        event.waitUntil(
                            caches.open(CACHE_NAME)
                                .then((cache) => cache.addAll(urlsToCache))
                        );
                    });
                    
                    self.addEventListener('fetch', (event) => {
                        event.respondWith(
                            caches.match(event.request)
                                .then((response) => {
                                    if (response) {
                                        return response;
                                    }
                                    return fetch(event.request);
                                })
                        );
                    });
                `;
                
                const blob = new Blob([swCode], { type: 'application/javascript' });
                const swUrl = URL.createObjectURL(blob);
                
                navigator.serviceWorker.register(swUrl)
                    .then((registration) => {
                        console.log('SW registered: ', registration);
                    })
                    .catch((registrationError) => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
        
        // PWA manifest
        const manifest = {
            "short_name": "Elevation Nav",
            "name": "Elevation Navigation",
            "start_url": ".",
            "display": "standalone",
            "theme_color": "#2563eb",
            "background_color": "#ffffff",
            "orientation": "portrait"
        };
        
        const manifestBlob = new Blob([JSON.stringify(manifest)], { type: 'application/json' });
        const manifestUrl = URL.createObjectURL(manifestBlob);
        
        const link = document.createElement('link');
        link.rel = 'manifest';
        link.href = manifestUrl;
        document.head.appendChild(link);
    </script>
</body>
</html>
